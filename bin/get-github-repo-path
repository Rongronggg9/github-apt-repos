#!/bin/sh
# Get the GitHub repo path from the parent directory

set -xe


main() {
    # Assume this checkout is placed somewhere in the GitHub repo with
    # the releases
    # TODO Rethink re-use in general
    cd ..

    # Derive the latest GitHub release URL
    # TODO replace with GitHub API usage
    # Get the repo URL from the origin remote
    gh_repo_path=$(git remote get-url origin)
    # Strip any *.git suffix
    gh_repo_path=${gh_repo_path%.git}
    # Strip SSH or HTTPS GitHub remote URL prefix
    gh_repo_path=${gh_repo_path#https://github.com/}
    echo ${gh_repo_path#git@github.com:}
}

main
